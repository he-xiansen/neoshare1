{% extends 'new_base.html' %}

{% block content %}
    <div class="card">
        <h2>æ¬¢è¿ä½¿ç”¨ NeoShare</h2>
        <p>è½»é‡çº§æ–‡ä»¶å…±äº«å¹³å°ï¼Œæ— éœ€ç™»å½•å³å¯ä¸Šä¼ å’Œä¸‹è½½å…¬å…±æ–‡ä»¶ã€‚</p>
    </div>

    <!-- å…¬å…±æ–‡ä»¶ä¸Šä¼  -->
    <div class="card">
        <h3>ä¸Šä¼ å…¬å…±æ–‡ä»¶</h3>
        <form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data" class="upload-form">
            <label for="file-upload" class="upload-label">
                ğŸ“ é€‰æ‹©æ–‡ä»¶
            </label>
            <input type="file" id="file-upload" name="file" required>
            <br>
            <button type="submit" class="btn btn-primary">ä¸Šä¼ æ–‡ä»¶</button>
        </form>
    </div>

    <!-- å…¬å…±æ–‡ä»¶åˆ—è¡¨ -->
    <div class="card">
        <h3>å…¬å…±æ–‡ä»¶</h3>
        <div class="file-list">
            {% for file in public_files %}
                <div class="file-item">
                    <div class="file-icon">ğŸ“„</div>
                    <div class="file-name">{{ file.filename }}</div>
                    <div class="file-meta">
                        <p>å¤§å°: {{ (file.file_size / 1024)|round(2) }} KB</p>
                        <p>ä¸Šä¼ æ—¶é—´: {{ file.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
                    </div>
                    <div class="file-actions">
                        <a href="{{ url_for('preview_file', file_id=file.id) }}" class="btn btn-secondary">é¢„è§ˆ</a>
                        <a href="{{ url_for('download_file', filename=file.filepath.replace('uploads_new/', '')) }}" class="btn btn-primary">ä¸‹è½½</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
