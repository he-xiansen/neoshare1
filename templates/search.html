{% extends 'base.html' %}

{% block content %}
    <div class="card">
        <h2>æœç´¢ç»“æœ</h2>
        <p>å…³é”®å­—: <strong>{{ keyword }}</strong></p>
        <p>æ‰¾åˆ° {{ files|length }} ä¸ªæ–‡ä»¶</p>
    </div>

    <div class="file-list">
        {% if files %}
            {% for file in files %}
                <div class="file-item">
                    <div class="file-icon">ğŸ“„</div>
                    <div class="file-name">{{ file.filename }}</div>
                    <div class="file-meta">
                        <p>å¤§å°: {{ (file.file_size / 1024)|round(2) }} KB</p>
                        <p>ä¸Šä¼ æ—¶é—´: {{ file.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
                        <p>çŠ¶æ€: {{ 'å…¬å…±' if file.is_public else 'ç§æœ‰' }}</p>
                    </div>
                    <div class="file-actions">
                        <a href="{{ url_for('preview_file', file_id=file.id) }}" class="btn btn-secondary">é¢„è§ˆ</a>
                        <a href="{{ url_for('download_file', filename=file.filepath.replace('uploads/', '')) }}" class="btn btn-primary">ä¸‹è½½</a>
                        {% if current_user.is_authenticated and (file.owner_id == current_user.id or current_user.is_admin) %}
                            <a href="{{ url_for('edit_file', file_id=file.id) }}" class="btn btn-success">ç¼–è¾‘</a>
                            <a href="{{ url_for('delete_file', file_id=file.id) }}" class="btn btn-danger" onclick="return confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ')">åˆ é™¤</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="card" style="grid-column: 1 / -1;">
                <p style="text-align: center; color: var(--text-secondary);">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶</p>
            </div>
        {% endif %}
    </div>
{% endblock %}
